import { 
    SlashCommandBuilder, 
    EmbedBuilder, 
    PermissionsBitField
} from 'discord.js';

// ----------------------------------------------------
// âš™ï¸ ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã®å®šç¾©
// ----------------------------------------------------
const MENU_ITEMS = {
    // 1ç•ªç›®ã®é¸æŠè‚¢: ã«ã‚ƒã‚“ã“
    'nyanko': {
        title: 'ğŸˆ ã«ã‚ƒã‚“ã“ä»£è¡Œãƒ‘ãƒãƒ«',
        color: '#f1c40f', // é»„è‰²
        description: 'å¤§äººæ°—ã®ãƒãƒ¼ãƒˆãƒ»ä»£è¡Œãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã™ã€‚æ–™é‡‘ã¨è©³ç´°ã‚’ã”ç¢ºèªãã ã•ã„ã€‚',
        content: () => `
\`\`\`markdown
# ã€ã«ã‚ƒã‚“ã“å¤§æˆ¦äº‰ã€‘ä»£è¡Œæ–™é‡‘ä¸€è¦§

## ğŸ’° ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (å€‹åˆ¥ä¾é ¼æ™‚ å„10å††)
- çŒ«ç¼¶: 48,000
- XP: 99,999,999
- NP: 9,999
- ãƒãƒˆãƒ«ã‚¢ã‚¤ãƒ†ãƒ : 999
- çŒ«ãƒ“ã‚¿ãƒ³: 999
- åŸç´ æ: 999
- ã‚­ãƒ£ãƒƒãƒ„ã‚¢ã‚¤: 999
- ãƒã‚¿ã‚¿ãƒ“: 998
- ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—: 999
- ã«ã‚ƒã‚“ãƒã‚±: 999
- ãƒ¬ã‚¢ãƒã‚±: 999
- ãƒ—ãƒ©ãƒã‚±: 5
- ãƒ¬ã‚¸ã‚§ãƒã‚±: 3
- ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¸ å…¨ã‚¯ãƒªã‚¢
- ãŠå® å…¨è§£æ”¾
- æ—§ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ å…¨ã‚¯ãƒªã‚¢
- ã‚¬ãƒãƒˆãƒˆãƒ¬ãƒ™ãƒ« MAX
- ã‚¬ãƒãƒˆãƒˆåŠ©æ‰‹ ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰
- ãƒ—ãƒ¬ã‚¤æ™‚é–“ å¤‰æ›´
- å…¨ã‚­ãƒ£ãƒ©é–‹æ”¾
- å½¢æ…‹è§£æ”¾
- å…¨ã‚­ãƒ£ãƒ©ãƒ¬ãƒ™ãƒ«MAX
- æ–½è¨­ãƒ¬ãƒ™ãƒ«MAX

## âœ¨ å…¨éƒ¨200å††ã‚»ãƒƒãƒˆ (æŒ‡å®šã‚’é™¤ãå…¨é …ç›®)
**æŒ‡å®šã‚­ãƒ£ãƒ©é–‹æ”¾ã€æŒ‡å®šã‚­ãƒ£ãƒ©å½¢æ…‹è§£æ”¾ä»¥å¤–ã®ã™ã¹ã¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼**ãŒ200å††ã§ã™ã€‚
- ä¸Šè¨˜ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼å…¨ã¦ãŒå«ã¾ã‚Œã¾ã™ã€‚

## ğŸ‘‘ å€‹åˆ¥ãƒ»æŒ‡å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ (è¦è¦‹ç©ã‚‚ã‚Š)
ä»¥ä¸‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯200å††ã‚»ãƒƒãƒˆã«å«ã¾ã‚Œãšã€å€‹åˆ¥æ–™é‡‘ãƒ»ãŠå•ã„åˆã‚ã›ãŒå¿…è¦ã§ã™ã€‚
- æŒ‡å®šã‚­ãƒ£ãƒ©é–‹æ”¾
- æŒ‡å®šã‚­ãƒ£ãƒ©å½¢æ…‹è§£æ”¾
\`\`\`
        `
    },
    // 2ç•ªç›®ã®é¸æŠè‚¢: ã·ã«ã·ã«
    'punipuni': {
        title: 'ğŸ‘¾ ã·ã«ã·ã«ä»£è¡Œãƒ¡ãƒ‹ãƒ¥ãƒ¼',
        color: '#9b59b6', // ç´«
        description: 'ã·ã«ã·ã«ã«é–¢ã™ã‚‹ä»£è¡Œãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã™ã€‚æ–™é‡‘ã¨è©³ç´°ã‚’ã”ç¢ºèªãã ã•ã„ã€‚',
        content: () => `
\`\`\`markdown
# ã€å¦–æ€ªã‚¦ã‚©ãƒƒãƒã·ã«ã·ã«ã€‘ä»£è¡Œæ–™é‡‘ä¸€è¦§

## ğŸ’° ãƒ¯ã‚¤ãƒã‚¤ãƒ³ãƒˆãƒ»å¼·æ•µ
- å¼·æ•µå…¥æ‰‹: 50å††
- 10ä¸‡ãƒ¯ã‚¤ãƒ: 500å††
- 20ä¸‡ãƒ¯ã‚¤ãƒ: 1,000å††
- 30ä¸‡ãƒ¯ã‚¤ãƒ: 1,500å††
- 40ä¸‡ãƒ¯ã‚¤ãƒ: 2,000å††
- 50ä¸‡ãƒ¯ã‚¤ãƒ: 2,500å††
- ã‚¤ãƒ™ãƒ³ãƒˆçµ‚äº†ã¾ã§ç¶™ç¶šä»£è¡Œ: 3,000å††

## ğŸ“š ç§˜ä¼æ›¸ãƒ»ã‚¹ã‚­ãƒ«æ›¸
- ç§˜ä¼æ›¸ã‚«ãƒ³ã‚¹ãƒˆ: 500å††
- ã‚¹ã‚­ãƒ«æ›¸ã‚«ãƒ³ã‚¹ãƒˆ: 1,000å††
  (â€»ã‚¹ã‚­ãƒ«æ›¸ã‚«ãƒ³ã‚¹ãƒˆã«ã¯ç§˜ä¼æ›¸ã‚«ãƒ³ã‚¹ãƒˆã‚‚å«ã¾ã‚Œã¾ã™)
\`\`\`
        `
    }
};

export default {
    // å¾“æ¥ã®SlashCommandBuilderã«ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ 
    data: new SlashCommandBuilder()
        .setName('menu')
        .setDescription('ä»£è¡Œã‚µãƒ¼ãƒ“ã‚¹æƒ…å ±ã‚’Embedã§è¡¨ç¤ºã—ã¾ã™ã€‚')
        .setDefaultMemberPermissions(PermissionsBitField.Flags.SendMessages) 
        
        // --- ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰: ã«ã‚ƒã‚“ã“ ---
        .addSubcommand(subcommand =>
            subcommand
                .setName('nyanko')
                .setDescription(MENU_ITEMS.nyanko.description)
        )
        // --- ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰: ã·ã«ã·ã« ---
        .addSubcommand(subcommand =>
            subcommand
                .setName('punipuni')
                .setDescription(MENU_ITEMS.punipuni.description)
        ),

    async execute(interaction, client) {
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰åã‚’å–å¾— ('nyanko' ã¾ãŸã¯ 'punipuni')
        const selectedMenu = interaction.options.getSubcommand();
        const item = MENU_ITEMS[selectedMenu];

        // å¿œç­”ã¯ä¸€åº¦ãã‚Šãªã®ã§ã€deferReplyã¯ä¸è¦ã€‚ç›´æ¥replyã—ã¾ã™ã€‚
        // interaction.deferReply({ ephemeral: false });

        if (!item) {
            // ä¸‡ãŒä¸€ã€å®šç¾©ã•ã‚Œã¦ã„ãªã„ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚ŒãŸå ´åˆ
            return interaction.reply({ 
                content: 'âŒ ä¸æ­£ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé¸æŠã•ã‚Œã¾ã—ãŸã€‚', 
                ephemeral: true 
            });
        }

        // é¸æŠã•ã‚ŒãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®å†…å®¹ã‚’å–å¾—
        const contentText = item.content(interaction.guild, null, client);

        // æ–°ã—ã„Embedã®ä½œæˆ
        const resultEmbed = new EmbedBuilder()
            .setColor(item.color)
            .setTitle(item.title)
            .setDescription(item.description)
            .addFields({ 
                name: '--- æ–™é‡‘ãƒ»è©³ç´°æƒ…å ± ---', 
                value: contentText, 
                inline: false 
            })
            .setTimestamp();
        
        // Embedã‚’é€ä¿¡ (ä¸€åº¦ãã‚Šã®å¿œç­”)
        await interaction.reply({
            embeds: [resultEmbed],
            // ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰å½¢å¼ã«ã—ãŸãŸã‚ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ä¸è¦
            components: [] 
        });
    },
};
